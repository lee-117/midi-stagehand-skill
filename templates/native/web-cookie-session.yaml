# Cookie 会话恢复模板 — 从 Cookie 文件恢复登录状态
# Cookie Session Template
# 演示通过加载已保存的 Cookie 跳过登录流程
# Usage: node scripts/midscene-run.js templates/native/web-cookie-session.yaml --dry-run
#
# cookie: 浏览器 Cookie 的 JSON 文件路径
# 导出方式: 使用浏览器 DevTools 或 Cookie 导出扩展
# 文件格式: JSON 数组 [{ name, value, domain, path, ... }]

engine: native

web:
  url: "https://example.com/profile"
  cookie: "./cookies/session.json"

tasks:
  - name: "验证会话恢复"
    flow:
      - aiWaitFor: "页面已加载且用户资料可见"
        timeout: 15000
      - aiAssert: "用户已登录（不在登录页面）"
      - aiQuery:
          query: "提取个人资料页面中的用户显示名称"
          name: "displayName"
      - recordToReport: "会话恢复"
        content: "基于 Cookie 的会话恢复验证完成"
